Refactor product search for synchronization (legacy)
